<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ê³„ì • ì”ê³  ì¡°íšŒ</title>
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
  <h1>ğŸ“Š ê³„ì • ì”ê³  & í¬ì§€ì…˜ ì¡°íšŒ</h1>
  <button onclick="fetchAccount('binance')">Binance</button>
  <button onclick="fetchAccount('bitget')">Bitget</button>

  <!-- ì”ê³  í…Œì´ë¸” -->
  <h2>ğŸ’° ì”ê³ </h2>
  <table id="balanceTable" style="display:none;">
    <thead>
      <tr id="balanceHeader"></tr>
    </thead>
    <tbody id="balanceBody"></tbody>
  </table>

  <script>
    async function fetchAccount(exchange) {
      try {
        const res = await fetch(`/api/${exchange}/account`);
        if (!res.ok) throw new Error("API í˜¸ì¶œ ì‹¤íŒ¨");
        const data = await res.json();

        // ì”ê³  í…Œì´ë¸”
        const bHead = document.getElementById("balanceHeader");
        const bBody = document.getElementById("balanceBody");
        bHead.innerHTML = "";
        bBody.innerHTML = "";

        if (data.assets && Array.isArray(data.assets)) {
          bHead.innerHTML = "<th>ìì‚°</th><th>ì§€ê°‘ ì”ê³ </th><th>ì‚¬ìš© ê°€ëŠ¥</th>";
          data.assets.forEach(a => {
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td>${a.asset}</td>
              <td>${a.walletBalance}</td>
              <td>${a.availableBalance}</td>
            `;
            bBody.appendChild(tr);
          });
          document.getElementById("balanceTable").style.display = "table";
        } else {
          document.getElementById("balanceTable").style.display = "none";
        }


      } catch (err) {
        alert("âŒ ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: " + err.message);
      }
    }
  </script>
</body>
</html>